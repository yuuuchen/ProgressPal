# 1陣列(Array)

## 1-1 陣列概論

### 1-1-1 陣列的定義

- 陣列是由相同型別元素組成的線性資料結構，所有元素依序存放於連續記憶體中，可透過索引直接存取。
- 索引通常從 0 開始，因此能快速定位元素位置。
- 可以把陣列想像成一排盒子，每個盒子內有資料，位置固定且編號唯一。
- 陣列的設計讓存取效率達到 $O(1)$，是最基本的資料結構之一。



### 1-1-2 使用陣列的理由

- **統一管理大量資料**：避免宣告太多變數，提升程式可讀性。
- **快速存取元素**：利用索引存取，時間複雜度 $O(1)$。
- **計算方便**：例如計算平均值，可以用迴圈遍歷整個陣列。


## 1-2 陣列的宣告與初始化

### 1-2-1 一維陣列宣告

- 在 Python 中可用串列模擬一維陣列
- 語法結構（以 Python 語言為例）：
```python
# 使用 Python list 建立一維陣列
marks = [90, 85, 75, 80, 70]
print(marks[0])  # 90
```

### 1-2-2 多維陣列宣告
```python
# 二維 (矩陣)
matrix = [[1, 2, 3],
          [4, 5, 6],
          [7, 8, 9]]
print(matrix[1][2])  # 6

# 三維 (立體陣列)
cube = [
    [[1, 2], [3, 4]],
    [[5, 6], [7, 8]]
]
print(cube[1][0][1])  # 6
```
- 也可擴展到 n 維陣列。
- 在 Python 中，可以用「串列嵌套串列」的方式模擬多維陣列


### 1-2-3 Python 陣列與串列

- Python 本身沒有固定大小的「原生陣列」，常用 list 當作「動態陣列」。
- list 具彈性，但若需高效能處理大量數據，會使用 NumPy 提供的 ndarray。
- NumPy 陣列能支援多維矩陣運算、向量化處理及數值計算，是科學計算和機器學習的重要工具。


## 1-3 陣列的存取與操作

### 1-3-1 元素存取

- 使用索引存取元素，例：`array[0]` 取得第一個元素。
- 多維陣列可用多重索引存取，例：`matrix[1][2]`
```python
arr = [10, 20, 30, 40]
print(arr[0])   # 10
print(arr[-1])  # 40 (負索引代表從尾端開始)
```


### 1-3-2 陣列遍歷

- 遍歷是指逐一處理陣列內的所有元素。
- 使用迴圈遍歷每個元素，執行操作如輸出、修改。
- Python 也支援 enumerate，可同時取得索引與元素，提升程式可讀性。
```python
arr = [1, 2, 3, 4, 5]
for x in arr:
    print(x, end=" ")  # 1 2 3 4 5
```

### 1-3-3 陣列操作：插入與刪除

- 插入元素需確保空間足夠，若在中間插入，需將後續元素依序後移。
- 刪除元素後，須將後續元素依序前移以補位。
```python
arr = [1, 2, 3, 4]

# 插入元素
arr.insert(2, 99)   # 在索引 2 插入
print(arr)  # [1, 2, 99, 3, 4]

# 刪除元素
arr.remove(99)      # 移除第一次出現的 99
print(arr)  # [1, 2, 3, 4]
```

### 1-3-4 搜尋

- 線性搜尋遍歷整個陣列。
- 有序陣列可利用二分搜尋加快搜尋效率。
```python
arr = [10, 20, 30, 40, 50]

# 線性搜尋
target = 30
if target in arr:
    print("Found at index:", arr.index(target))  # Found at index: 2

# 二分搜尋 (需要排序)
import bisect
arr.sort()
pos = bisect.bisect_left(arr, 30)
if pos < len(arr) and arr[pos] == 30:
    print("Binary search found at index:", pos)
```


## 1-4 陣列的記憶體結構

### 1-4-1 連續記憶體存放

- 陣列元素存放於記憶體連續區域。
- 只需知道起始位址與元素大小，透過計算可定位任一元素。
- 傳統陣列（如 C/C++）的元素存放於連續記憶體區域。
- Python list 則是「動態陣列」，內部可能包含指標，但存取仍是 $O(1)$。


### 1-4-2 地址計算公式

- 一維陣列元素地址：\$ A[i] = base\_address + size\_of\_element \times (i - lower\_bound) \$
- 其中 base 為起始位址，size 為元素大小。
- 二維陣列根據行主（row-major）或列主（column-major）格式計算元素地址。


## 1-5 陣列類型介紹

### 1-5-1 一維陣列

- 最簡單的形式。
- 線狀陣列，適合三種對象：串列、向量、一維數據集合。
- 常用於簡單資料收集與數據處理。例如學生成績、感測器數據等，常用於需要依序處理的場合。


### 1-5-2 二維陣列

- 類似表格結構，行與列的資料組合。
- 用於矩陣運算、棋盤遊戲及圖片處理等。
- 二維結構直觀，能清楚對應數學計算與表格型資料。


### 1-5-3 三維陣列

- 三維陣列可視為「陣列的陣列」。
- 立體結構，用於模擬3D資料，如影像資料或空間資料。
- 三維結構能表示多層次資訊，但操作上比一維、二維更複雜。


### 1-5-4 n 維陣列

- 當資料維度更高時，可使用 n 維陣列，例如科學模擬、深度學習中的張量。
- NumPy 與其他數學套件能高效處理這類結構。
- 儘管高維陣列難以直觀理解，但在機器學習與數據科學中極為重要。


## 1-6 Python 陣列與 NumPy 多維陣列實作

### 1-6-1 Python 基本串列作為陣列範例

```python
# 一維list
arr = [10, 20, 30, 40]
print(arr[0])  # 輸出 10

# 二維list
matrix = [[1, 2], [3, 4]]
print(matrix[1][^0])  # 輸出 3
```


### 1-6-2 NumPy 套件 n 維陣列

- NumPy 的 ndarray 支援多維陣列高效計算。

```python
import numpy as np
arr = np.array([[1, 2], [3, 4]])
print(arr.shape)  # (2, 2)
print(arr[0, 1])  # 2

# 三維陣列
cube = np.array([[[1,2],[3,4]], [[5,6],[7,8]]])
print(cube.shape)  # (2, 2, 2)
```


## 1-7 陣列的時間複雜度與效能分析

### 1-7-1 讀取元素

- 陣列存取效率高，因為元素位址可直接計算，因此存取任意索引皆為 $O(1)$。 
- 這使陣列在需要隨機存取的場合非常實用。


### 1-7-2 插入與刪除

- 插入或刪除元素時，需搬移後續元素以維持連續性，因此時間複雜度為 $O(n)$。
- 若操作多，效率低於鏈結串列。


### 1-7-3 搜尋

- 未排序陣列需線性搜尋，效率為 $O(n)$。
- 若已排序，可使用二分搜尋，效率提升為 $O(\log n)$。
- 是否排序會直接影響搜尋表現。


## 1-8 陣列的優缺點

### 1-8-1 優點

- 結構簡單且易於實作。
- 支援快速隨機存取和便利的遍歷操作。
- 大多數演算法與資料處理的基礎結構之一。


### 1-8-2 缺點

- 陣列大小固定，無法動態擴充。
- 插入和刪除效率低，尤其在中間位置處理時，需大量搬移元素，因此在某些應用上不如鏈結串列靈活。