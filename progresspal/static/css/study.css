/*教材*/
/*教材淡入*/
#material-card {
    opacity: 0;
    /* 從下面滑上來 */
    transform: translateY(15px);
    
    /* 2. 設定過場動畫：
     * - 0.7 秒完成 opacity (不透明度) 變化
     * - 0.5 秒完成 transform (位置) 變化
     */
    transition: opacity 0.7s ease-out, transform 0.5s ease-out;
    height: 100%;
    max-height: 100%;
    overflow: hidden;
    flex-direction: column;
}

/* 當卡片被加上 .visible class 時，讓它顯示 */
#material-card.visible {
    opacity: 1;
    transform: translateY(0);
}

/* 鎖定教材卡片的主體區域 */
#material-card .card-body {
    overflow-x: auto;
    flex-grow: 1;
    overflow-y: auto;
    height: 0;
}

/* 針對 Markdown 產生的 <pre> (程式碼區塊) */
#material-card .card-body pre {
    white-space: pre-wrap;  /* 允許程式碼在 pre 標籤內自動換行 */
    word-break: break-all; /* 對於過長的單一字串強制斷詞 */
}

/* 針對 Markdown 產生的 <table> */
#material-card .card-body table {
    /* 讓表格在需要時可以水平捲動*/
    display: block;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap; /* 讓表格內容盡量保持在同一行 */
}

/*情緒*/


/*提問區*/
#chat-container.card {
    display: flex;
    flex-direction: column;
    /* 高度由 style="height: 75vh;" 或 h-100 控制 */
    height: 100%; /* 確保佔滿右側欄位高度 */
    max-height: 100%;
    overflow: hidden;
}

#chat-history {
    flex-grow: 1; /* 佔據所有可用垂直空間 */
    overflow-y: auto; /* 內容超出時顯示垂直捲軸 */
    height: 0;
    flex-direction: column;
    padding: 0.5rem;
}

/* 讓按鈕在按下時，變成實心灰色 */
#chat-container .card-footer .btn-outline-secondary.active {
    background-color: #6c757d; /* 變成實心灰色 */
    color: white;             /* 文字變成白色 */
    border-color: #6c757d;    /* 邊框也變灰色 */
    /* (可選) 加上一點陰影，讓它更突出 */
    box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); 
}

/* 所有對話框的基礎樣式*/
.message {
    padding: 0.5rem 1rem; /* 上下 8px, 左右 16px 的內邊距 */
    border-radius: 1.25rem; /* 圓潤的邊角 (20px) */
    margin-bottom: 0.5rem; /* 和下一則訊息的間距 (8px) */
    max-width: 85%; /* 最大寬度不超過聊天室寬度的 85% */
    white-space: normal;
    width: fit-content; /* 寬度自動根據內容調整 */
}

.message.extended-mode {
    white-space: pre-wrap; /* 保留 \n 換行 */
}

/* 使用者的訊息樣式 */
.user-message {
    background-color: #265294; /* 背景色 */
    color: white;             /* 白色文字 */
    align-self: flex-end;     /* 在 Flex 容器中靠右對齊 */
    border-bottom-right-radius: 0.3rem; /* 右下角稍微變方一點 */
    margin-left: auto;        /* 確保在 flex 容器中靠右 */
}

/* 回應訊息樣式 */
.assistant-message {
    background-color: #cdd6e0; /* 背景色 */
    color: #000000; /* 黑色文字 */
    align-self: flex-start; /* 在 Flex 容器中靠左對齊 */
    border-bottom-left-radius: 0.25rem; /* 左下角稍微變方一點 (4px)，增加視覺變化 */
    margin-right: auto; /* 在 Flex 容器中，確保內容寬度不足時，元素仍靠左 */
}

/* 錯誤訊息樣式 */
.error-message {
    background-color: #cdd6e0; /* 背景色 */
    color: #524f4f;             /* 灰色文字*/
    align-self: flex-start; /* 靠左對齊 */
    border-bottom-left-radius: 0.3rem;
    margin-right: auto;
}

/* --- 測驗專用樣式 --- */
    
/* 讓測驗卡片在區塊中垂直水平置中 */
.quiz-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
    background-color: #f8f9fa; /* 淡淡的背景色讓卡片跳出來 */
}

/* 白色的測驗卡片 */
.card-quiz {
    background: white;
    width: 100%;
    max-width: 600px; /* 限制最大寬度，避免在大螢幕太寬 */
    padding: 2.5rem;
    border-radius: 16px; /* 更圓潤的邊角 */
    box-shadow: 0 10px 25px rgba(0,0,0,0.05); /* 柔和的陰影 */
    text-align: center;
}

/* 題目文字 */
.question-text {
    font-size: 1.5rem;
    color: #2c3e50;
    margin-bottom: 2rem;
    font-weight: 700;
    line-height: 1.4;
}

/* 選項容器 */
.options-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

/* 選項按鈕基本樣式 */
/* 外層按鈕容器 */
.option-btn {
    display: flex;         /* 讓圈圈跟文字橫向排列 */
    align-items: center;   /* 讓它們垂直置中對齊 */
    padding: 12px;
    margin: 8px 0;
    border: 1px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    background-color: #fff;
    transition: all 0.2s;
}

/* 圈圈原本的樣子 (未選中) */
.circle {
    width: 18px;           /* 圈圈寬度 */
    height: 18px;          /* 圈圈高度 */
    border: 2px solid #bbb;/* 灰色邊框 */
    border-radius: 50%;    /* 變成圓形 */
    margin-right: 12px;    /* 圈圈跟右邊文字的距離 */
    background-color: transparent;
    transition: all 0.2s;
    flex-shrink: 0;        /* 防止文字太長時圈圈被擠扁 */
}

/* --- 選中時的樣式 (搭配 selectOption 函式使用) --- */

/* 當按鈕加上 selected class 時，改變邊框顏色 */
.option-btn.selected {
    border-color: #007bff;
    background-color: #f0f8ff; /* 淺藍色背景 */
}

/* 當按鈕被選中時，裡面的圈圈變成實心藍色 */
.option-btn.selected .circle {
    background-color: #007bff;
    border-color: #007bff;
    box-shadow: inset 0 0 0 3px #fff; /* 做一個內光暈，看起來像甜甜圈或選取框 */
}

/* 滑鼠懸停效果 (非禁用狀態) */
.option-btn:hover:not(.disabled) {
    background-color: #f8f9fa;
    border-color: #dee2e6;
    transform: translateY(-2px);
}

/* 選中狀態 (藍色) */
.option-btn.selected {
    border-color: #0d6efd;
    background-color: #f0f7ff;
    color: #0d6efd;
    font-weight: 600;
    box-shadow: 0 0 0 1px #0d6efd;
}

/* 正確答案 (綠色) */
.option-btn.correct {
    border-color: #198754 !important;
    background-color: #d1e7dd !important;
    color: #0f5132 !important;
}

/* 錯誤答案 (紅色) */
.option-btn.wrong {
    border-color: #dc3545 !important;
    background-color: #f8d7da !important;
    color: #842029 !important;
}

/* 分數大字 */
.score-text {
    font-size: 4rem;
    font-weight: 800;
    color: #0d6efd;
    margin: 20px 0;
}

/* 隱藏元素用 */
.hidden {
    display: none !important;
}

/* 按鈕禁用樣式 */
button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}